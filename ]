#include "board.h"
#include "tile.h"
#include <iostream>

class DestructorTest
{
  DescructorTest()
  {
    *destruct_tester = false;
  }

  ~DestructorTest()
  {
    *destruct_tester = true;
  }

  bool *destruct_tester;
}


int test_getting_and_setting(Board<int> b)
{

  // ensure that board can be set and gotten
  // as expected
  for(size_t i=0; i<10; ++i)
  for(size_t j=0; j<20; ++j)
  {
    b(i,j) = i*20 + j;
  }

  for(size_t i=0; i<10; ++i)
  for(size_t j=0; j<20; ++j)
  {
    if(b(i,j) != (i*20 + j))
    {
      std::cout << "Board not set or read correctly" << std::endl;
      return 1;
    }
  }

  return 0;
}

int main(void)
{
  // test empty initialization
  {
    Board<int> b;

    // test height and width
    if(b.get_width() != 0 || b.get_height() != 0)
    {
      std::cout << "Empty initialization has non-zero height or width"
                << std::endl;
      return 1;
    }

    b.resize(10,20);

    // test height and width after resize
    if(b.get_width() != 10 || b.get_height() != 20)
    {
      std::cout << "Empty initialization has non-zero height or width"
                << std::endl;
      return 1;
    }

    if( test_getting_and_setting(b) == 1)
    {
      return 1;
    }
    
  }

  // test nonzero initialization
  {
    Board<int> b(10,20);

    // height and width should be 10
    if(b.get_width() != 10 || b.get_height() != 20)
    {
      std::cout << "Height or Width not set correctly" << std::endl;
      return 1;
    }

    if( test_getting_and_setting(b) == 1)
    {
      return 1;
    }
  }


  // destructor test
  {
    Board<DestroctorTest> b(5,5);
    bool destructors[5][5];

    for(size_t i=0; i<5; ++i)
    for(size_t j=0; j<5; ++j)
    {

  }


  // everything passed
  return 0;
}
